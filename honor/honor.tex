\documentclass[11pt]{article}
\usepackage{tabularx}
\usepackage{fancybox}
\usepackage{amsmath}
\usepackage[top=1.5in,bottom=1in,right=1in,left=1in,headheight=65pt]{geometry}
\usepackage{graphicx}
\usepackage{fancyhdr}

%Gummi|065|=)
\begin{document}
\pagestyle{fancy}

\fancyhead[L]{Stevens UPEPC\\12 April 2014}
\fancyhead[C]{{\LARGE\textbf{Honor Coding}}}
\fancyhead[R]{\includegraphics[height=32pt]{../stevenslogo.eps}\ \ \ \includegraphics[height=32pt]{../upelogo.png}}

\section{Problem Statement}

Professor Nicolosi is preparing to give a final exam, but is concerned that,
given the opportunity, his students will cheat. He decides on a few ground
rules to prevent the students from cheating:
\begin{enumerate}
\item No student may sit adjacent (left/right) to another student.
\item No student may sit diagonally behind another student.
\end{enumerate}
\smallskip
For example, if Prof. Nicolosi has 10 desks in 2 rows of 5,
and he has 4 students to seat, they could be sat as follows:

\begin{center}
\setlength{\tabcolsep}{8pt}
\renewcommand{\arraystretch}{1.5}
\begin{tabular}{ | m{6pt} | m{6pt} | m{6pt} | m{6pt} | m{6pt} | }
		\hline
 		& 1 & & 2 & \\ \hline
		& 3 & & 4 & \\
 		\hline
\end{tabular} \ \ GOOD
\end{center}
\smallskip
In an alternative arrangement, he is concerned that students 1 and 2 will copy
each other's tests, and student 4 will cheat off of students 2 and 3.

\begin{center}
\setlength{\tabcolsep}{8pt}
\renewcommand{\arraystretch}{1.5}
\begin{tabular}{ | m{6pt} | m{6pt} | m{6pt} | m{6pt} | m{6pt} | }
		\hline
 		1 & 2 & & 3 & \\ \hline
		& & 4 & & \\
 		\hline
\end{tabular} \ \ BAD
\end{center}
\bigskip
Unfortunately for the Professor, many of the classrooms have broken desks,
so he can't seat students in these desks. Additionally, each desk
is attached to the floor, so they cannot be moved. Given the same 2x5 classroom
with three broken desks, a valid arrangement for the four students could then be
as follows (X's are used to mark desks that are broken and cannot be used).

\begin{center}
\setlength{\tabcolsep}{8pt}
\renewcommand{\arraystretch}{1.5}
\begin{tabular}{ | m{6pt} | m{6pt} | m{6pt} | m{6pt} | m{6pt} | }
		\hline
 		X & X & 1 & & 2 \\ \hline
		3 & & X & & 4 \\
 		\hline
\end{tabular}\ \ GOOD
\end{center}
\bigskip
Professor Nicolosi wants to determine the maximum number of students he can sit
in a classroom such that there is no cheating. Given the classroom layout,
find the maximum number of students that can be seated according to his rules.

\section{Input}
The first line of input contains a single integer $\boldsymbol{P}$, $(\boldsymbol{1} \le \boldsymbol{P} \le \boldsymbol{1000})$, which is the number of data sets that follow. Each
data set should be processed identically and independently.
\\\\
Each data set begins with a single line that contains $\boldsymbol{K}$, the data
set number, followed by $\boldsymbol{R}$, $(\boldsymbol{1} \le \boldsymbol{R} \le \boldsymbol{1000})$ which
is the number of rows of desks and $\boldsymbol{C}$,
$(\boldsymbol{1} \le \boldsymbol{C} \le \boldsymbol{10})$
which is the number of columns of desks in the classroom. The desks are always
arranged in a grid, so the total number of desks is exactly equal to
$\boldsymbol{R} \times \boldsymbol{C}$, however this may include broken desks.
\\\\
This is followed by $\boldsymbol{R}$ lines which describe the desks that are
broken in each row. Each line is of the format $(\boldsymbol{n}\ \ a_1\ \ a_2\ \ \ldots\ \ a_n)$,
where $\boldsymbol{n}$, $(\boldsymbol{0} \le \boldsymbol{n} \le \boldsymbol{C})$
is the number of broken desks in the row, and each $a_i$,
$(\boldsymbol{0} \le a_i < \boldsymbol{C})$ is the column of
a desk that is broken in the row. If there are no broken desks in a row, the
line will simply contain the number $0$ (because $n = 0$).

\section{Output}
For each data set there is a single line of output. The single line of output
consists of the data set number $\boldsymbol{K}$, followed by a single space
followed by the maximum number of students that can be seated in the classroom
under the Professor's constraints.

\section{Test Data}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	Input & Output \\ \hline
	\parbox[t]{5cm}{
	\texttt{3\\
	1 2 5\\
	2 1 3\\
	2 1 3\\
	2 2 5\\
	2 0 1\\
	1 2\\
	3 3 5\\
	1 3\\
	1 1\\
	2 2 3\\
	}} &
	\parbox[t]{5cm}{
	\texttt{1 6\\
	2 4\\
	3 8\\
	}}\\
	\hline
\end{tabularx}
\\\\\\
For your convenience, the sample input classroom arrangements are listed
below, where X is used to indicate a desk that is broken. The first desk
of the first row is at the top left of each chart.
\\\\
\begin{tabularx}{\textwidth}{X X X}
Data set \#1 & Data set \#2 & Data set \#3\\
\setlength{\tabcolsep}{8pt}
\renewcommand{\arraystretch}{1.5}
\begin{tabular}[t]{ | m{6pt} | m{6pt} | m{6pt} | m{6pt} | m{6pt} | }
		\hline
 		  & X &   & X & \\ \hline
		  & X &   & X & \\
 		\hline
\end{tabular}
&
\setlength{\tabcolsep}{8pt}
\renewcommand{\arraystretch}{1.5}
\begin{tabular}[t]{ | m{6pt} | m{6pt} | m{6pt} | m{6pt} | m{6pt} | }
		\hline
 		X & X &   &   & \\ \hline
		  &   & X &   & \\
 		\hline
\end{tabular}
&
\setlength{\tabcolsep}{8pt}
\renewcommand{\arraystretch}{1.5}
\begin{tabular}[t]{ | m{6pt} | m{6pt} | m{6pt} | m{6pt} | m{6pt} | }
		\hline
 		  &   &   & X & \\ \hline
		  & X &   &   & \\ \hline
          &   & X & X & \\
 		\hline
\end{tabular}
\end{tabularx}
\newpage
\section{Judge's Solution}
The goal of this problem is to maximize the number of students that
can be seated. Using a dynamic programming approach, we can define
the problem based on the result of a sub-problem.
\\\\
We will consider the maximum number of students that can be seated
given the last row to be defined as:
\begin{align*}
M(0, s_k) &= \text{count}(s_k) \text{ if } s_k \in R_0\text{, } 0 \text{ otherwise}\\
M(i, s_k) &= \text{max}_{\ s_k \in R_i,\ s_j \in R_{i-1},\ \text{valid}(s_k,\ s_j)}\ M(i-1, s_j) + \text{count}(s_k) \\
\text{valid}(s_k, s_j) &= \text{True iff seating arrangement }s_k\text{ is valid behind }s_j\\
count(s_i) &= \text{The number of students seated in combination }s_i \\
R_i &= \text{Set of valid seating combinations of the }i\text{th row}
\end{align*}
This is to say that the maximum number of students that can be seated in
the first $i+1$ rows, given that row $i$ is arranged as $s_i$, is equal to
the maximum number of students that can be seated in any valid row $s_j$ that
row $s_k$ can be behind plus the number of students seated in row $s_k$.
\\\\
Using this algorithm, we will follow the procedure:
\begin{enumerate}
\item Read a row in the classroom into \texttt{D}, where \texttt{D} stores the
available desks in the row (i.e, desks that are not broken).
\item From the available desks \texttt{D}, generate every possible combination of seating
arrangements that do not place any two students next to each other. It works
out that the number of combinations will never exceed $\emph{fib}(C+1)$, where
$C$ is the number of columns and $\emph{fib}(i)$ is the $i$th number in the
Fibonacci sequence, where $\emph{fib}(0) = 0$. This shows that we will have to store at most
$\emph{fib}(11) = 89$ possibilities for the row, which is manageable for our program.
\item For each combination we have generated, we will compare it with every
possible combination in the previous row and keep track of the maximum number
of students that are seated for only the valid combinations.
\item When the last row is finished, we can find the maximum number of students that
can be seated in the classroom by finding the maximum number that can be seated
in any of the combinations of the last row.
\end{enumerate}

\end{document}